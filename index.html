<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day Planner</title>
  
  <style>
    body {
      
      /* background: url('https://source.unsplash.com/1920x1080/?nature,landscape') center/cover;
      font-family: 'Helvetica', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh; */
      background-image: url("https://as1.ftcdn.net/v2/jpg/04/48/57/28/1000_F_448572837_oVzK9uVh3O2iu7oXPzM6LKv9RFsI4Lt1.jpg");
      background-color: #f0f0f0;
      font-family: 'Helvetica', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
       background-repeat: no-repeat;
       background-size: cover;
       
    }

    

    .content-container {
      position: relative;
    }

    .no-select {
      user-select: none;
    }

    #mindmap-container {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 60vh;
      width: 100%;
      max-width: 1200px; /* Set a maximum width to prevent excessive expansion on larger screens , code by PranjalMishra*/
      /* background-color: rgba(255, 255, 255, 0.7); */
      border-radius: 10px;
      /* box-shadow: 0 0 20px rgba(0, 0, 0, 0.2); */
      overflow: hidden;
      padding: 10px; /* Add some padding to create space between the content and container edges, code by PranjalMishra */
      box-sizing: border-box; /* Include padding in the element's total width. code by PranjalMishra */
    }

    

    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
      100% {
        transform: scale(1);
      }
    }

    .task-node,
    .sub-task-node {
      position: absolute;
      
      background-color: #fff;
      border-radius: 50%;
      padding: 10px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, .3);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      transform: translate(-50%, -50%); /* Center the node, code by PranjalMishra */
      animation: fadeIn 0.5s ease-in-out;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
      animation: pulse 2s ease-in-out infinite;
      transition: background-color 0.3s ease, transform 0.3s ease;
      transition: transform 0.3s ease;
      transform: translate(-50%, -50%) rotateX(60deg) rotateY(45deg) rotateZ(0deg);
  transition: transform 0.3s ease;
  perspective: 800px;
  transform-style: preserve-3d;
    }

    

    .task-node:hover,
    .sub-task-node:hover {
      background-color: #f1c40f;
      transform: scale(1.05);
      transform: translate(-50%, -50%) rotateX(60deg) rotateY(45deg) rotateZ(30deg);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes scaleIn {
      from {
        transform: scale(0);
      }
      to {
        transform: scale(1);
      }
    }

    h1 {
      font-size: 36px;
      color: #fff;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      margin: 0;
      padding: 20px 0;
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
    }

    .top-buttons {
      position: absolute;
      top: 0;
      right: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 40px;
    }

    .button1{
      background-color: #fff;
      color: #333;
      border-radius: 8px;
      border: 2px solid #fff;
      height: 40px;
      width: 100px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.8s ease, color 0.8s ease, transform 0.8s ease;
      margin-left: 10px;
    }

    @keyframes rotateIn {
      0% {
        transform: rotate(-30deg) scale(0);
        opacity: 0;
      }
      100% {
        transform: rotate(0deg) scale(1);
        opacity: 1;
      }
    }



    .button1:hover,
    .button2:hover,
    .button3:hover,
    .button4:hover,
    .button5:hover {
      cursor: pointer;
      border-radius: 5px;
      border: 0px ;
      height: fit-content;
      width: 155px;
      line-height: 25px;
      font-size: 15px;
      transition: 0.5s;
      font-weight: 700;
      background: linear-gradient(45deg, #64b5f6, #1e88e5);
      background-color: #333;
      color: #fff;
      transform: scale(1);
    }

    .add-task-button {
  position: absolute;
  top: 100px; /* Adjust the top value as needed to place it below the title , code by PranjalMishra*/
  left: 10px; /* Adjust the left value as needed , code by PranjalMishra*/
  z-index: 1; /* Set a higher z-index to bring the button above other elements , code by PranjalMishra*/
}



    

    .add-remove-buttons {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }

    .update-button {
      background-color: black;
      color: white;
      border-radius: 5px;
      border: 2px solid black;
      height: fit-content;
      width: 120px;
      line-height: 20px;
      padding: 5px;
      margin-right: 5px;
    }

    .update-button:hover {
      cursor: pointer;
      background-color: #444;
    }

    .remove-button {
      background-color: black;
      color: white;
      border-radius: 5px;
      border: 2px solid black;
      height: fit-content;
      width: 120px;
      line-height: 20px;
      padding: 5px;
    }

    .remove-button:hover {
      cursor: pointer;
      background-color: #ff4d4d;
    }

    .title-input {
      display: none;
    }

    .save-button {
      display: none;
    }

    .sub-tasks-container {
      position: relative;
    }

    .line {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-left: 2px solid #000;
      height: calc(100% + 10px); /* Adjust the height to connect the sub-tasks correctly , code by PranjalMishra*/
      width: 2px;
    }

    @media (max-width: 600px) {
      #mindmap-container {
        padding-top: 200px;
        padding-bottom: 50px;
        transition: 1s;
        
      }

      .task-node {
        width: 80px;
        height: 80px;
        font-size: 14px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .sub-task-node {
        width: 60px;
        height: 60px;
        font-size: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      
    }

    @media (max-width: 600px) {
      /* Adjust container padding and top buttons layout , code by PranjalMishra*/
      #mindmap-container {
        padding-top: 200px;
        padding-bottom: 70px; /* Add more padding at the bottom for button visibility , code by PranjalMishra */
      }

      .top-buttons {
        flex-direction: column;
        align-items: center;
      }

      .button1 {
        margin-bottom: 10px;
        width: 120px;
        font-size: 12px;
        padding: 8px 12px; /* Add more padding for touch-friendly interactions , code by PranjalMishra */
      }

      /* Add top margin for the "Zoom Out" button ,code by PranjalMishra */
      .button1:first-child {
        margin-top: 100px;
      }

      .add-remove-buttons {
        justify-content: center; /* Center the Add Task button on smaller screens, code by PranjalMishra */
        margin-top: 20px;
        margin-bottom: 20px;
      }

      .task-node {
        width: 80px; /* Increase node size to accommodate touch interactions ,code by PranjalMishra*/
        height: 80px;
        font-size: 14px; /* Increase font size for better readability , code by PranjalMishra*/
      }

      .sub-task-node {
        width: 60px; /* Increase node size to accommodate touch interactions , code by PranjalMishra*/
        height: 60px;
        font-size: 12px; /* Increase font size for better readability ,code by PranjalMishra */
      }

      .line {
        width: 2px;
      }

      h1 {
        font-size: 24px; /* Decrease heading font size for better fit , code by PranjalMishra*/
      }
    }

    @media (max-width: 768px) {
      .content-container {
        width: 90%;
        padding: 0; /* Remove padding on smaller screens to make better use of space ,code by PranjalMishra */
      }

      .top-buttons {
        flex-direction: column; /* Stack buttons vertically on smaller screens , code by PranjalMishra*/
        align-items: center; /* Center buttons horizontally on smaller screens ,code by PranjalMishra */
        margin-bottom: 20px; /* Add more space between buttons  ,code by PranjalMishra*/
      }

      .button {
        width: 160px; /* Increase button width for better touch interaction , code by PranjalMishra */
        margin-bottom: 10px; /* Add space between buttons , code by PranjalMishra*/
      }

      #mindmap-container {
        height: 70vh; /* Increase the height of the container for better visibility on smaller screens  ,code by PranjalMishra*/
      }

      .task-node {
        width: 120px;
        height: 120px;
        font-size: 16px; /* Increase font size for better readability , code by PranjalMishra*/
      }

      .sub-task-node {
        width: 100px;
        height: 100px;
        font-size: 14px; /* Increase font size for better readability, code by PranjalMishra */
      }
    }

  </style>
</head>
<body>
  <h1>Day Planner</h1>
  
  <iframe src="https://my.spline.design/untitled-762d8ae72cbbed4b3428fd51eb7aebc8/" style="width: 100%; height: 500px;"></iframe>
  

  <div class="top-buttons">
    <button class="button1" id="zoom-in-button">Zoom In</button>
    <button class="button1" id="zoom-out-button">Zoom Out</button>
    <button class="button1" onclick="exportPlanner()">Export Day Plan</button>
  </div>

  
<div class="add-remove-buttons">
  <button class="button1" id="add-task-button">Add Task</button>
  <button class="button1" id="add-subtask-button" onclick="addSubtask()">Add Subtask</button>
  <!-- <button class="button1" id="update-task-button">Update Task</button>
  <button class="button1" id="update-subtask-button">Update Subtask</button> -->
</div>

  <div id="mindmap-container">
    <div id="mind-map"></div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="script.js"></script>
 <script>
    // Variables to store cube rotation ,code by PranjalMishra
  const cubeRotation = new THREE.Quaternion();

  
  // Adjust the rotation speed (increase as needed), code by PranjalMishra
  const rotationSpeed = 0.13;

    // Get the container element , code by PranjalMishra
    const mindMapContainer = document.getElementById('mind-map');

    // Create the Three.js scene ,code by PranjalMishra
    const scene = new THREE.Scene();

    // Create the camera ,code by PranjalMishra
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 0, 5);
    scene.add(camera);

    // Create the renderer ,code by PranjalMishra
    const renderer = new THREE.WebGLRenderer({ alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    mindMapContainer.appendChild(renderer.domElement);

    // Create a light source , code by PranjalMishra
    const light = new THREE.DirectionalLight(0xffffff, 1); // Use white light ,code by PranjalMishra
    light.position.set(1, 2, 3);
    scene.add(light);

    // Variables to track mouse movement and active cube ,code by PranjalMishra
    let isDragging = false;
  let previousMousePosition = { x: 0, y: 0 };
  let activeCube = null;
  let intersectOffset = new THREE.Vector3(); // Offset between mouse position and cube position , code by PranjalMishra
  let initialScale = new THREE.Vector3(); // to store the intial scale ,code by PranjalMishra

    // Create an array to store the cubes (tasks) ,code by PranjalMishra
    const cubes = [];

    // Add mouse event listeners ,code by PranjalMishra
    mindMapContainer.addEventListener('mousedown', onMouseDown);
    document.addEventListener('mouseup', onMouseUp);
    mindMapContainer.addEventListener('mousedown', onMouseDown);
    mindMapContainer.addEventListener('mouseup', onMouseUp);
    mindMapContainer.addEventListener('mousemove', onMouseMove);
    document.addEventListener('keydown', onArrowKeyDown);

    function onMouseDown(event) {
    isDragging = true;
    previousMousePosition = { x: event.clientX, y: event.clientY };

    // Get the intersected object (cube) at the mouse position ,code by PranjalMishra
    const intersects = getIntersects(event);
      if (intersects.length > 0) {
        activeCube = intersects[0].object;
        intersectOffset.copy(intersects[0].object.position).sub(intersects[0].point); // Update the intersectOffset based on the initial intersection point and the cube's position ,code by PranjalMishra

        // Store the initial scale of the cube ,code by PranjalMishra
        initialScale.copy(activeCube.scale);

        // Save the parent cube for adding subtasks ,code by PranjalMishra
        parentCube = activeCube;}
  }

    function onMouseUp() {
      isDragging = false;
      activeCube = null;
    }

    function onMouseMove(event) {
    if (isDragging && activeCube) {
      const mouse = new THREE.Vector2(
        (event.clientX / window.innerWidth) * 2 - 1,
        -(event.clientY / window.innerHeight) * 2 + 1
      );

      const raycaster = new THREE.Raycaster();
      raycaster.setFromCamera(mouse, camera);

      const intersects = raycaster.intersectObjects(cubes);

      if (intersects.length > 0) {
        // Calculate the new position based on the intersection point and offset ,code by PranjalMishra
        const newPosition = intersects[0].point.clone().add(intersectOffset);
        activeCube.position.copy(newPosition);

        // Calculate the new scale based on the distance from the camera ,code by PranjalMishra
        const distance = camera.position.distanceTo(activeCube.position);
        const minScale = 0.5; // Set a minimum scale to prevent the cube from becoming too small ,code by PranjalMishra
        const newScale = Math.max(minScale, initialScale.x * distance / 5); // Adjust the factor (5) as needed for desired scaling sensitivity ,code by PranjalMishra
        activeCube.scale.set(newScale, newScale, newScale);
      }

      previousMousePosition = { x: event.clientX, y: event.clientY };
    }
  }

    

    // Helper function to get intersected objects at the mouse position ,code by PranjalMishra
    function getIntersects(event) {
      const mouse = new THREE.Vector2();
      mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

      const raycaster = new THREE.Raycaster();
      raycaster.setFromCamera(mouse, camera);

      return raycaster.intersectObjects(cubes, true);
    }

    // Add "Add Task" button event listener ,code by PranjalMishra
    const addButton = document.getElementById('add-task-button');
    addButton.addEventListener('click', addTask);

    function addTask() {
      const size = 1; // Size of the cube ,code by PranjalMishra

      const geometry = new THREE.BoxGeometry(size, size, size);
      const material = new THREE.MeshLambertMaterial({ color: 0xfafafa }); // Use a light color, code by PranjalMishra
      const cube = new THREE.Mesh(geometry, material);
      scene.add(cube);

      // Randomly position the new cube in the scene ,code by PranjalMishra
      cube.position.x = Math.random() * 4 - 2;
      cube.position.y = Math.random() * 4 - 2;
      cube.position.z = Math.random() * 4 - 2;

      cubes.push(cube);
    }

     // Add "Add Task" button event listener ,code by PranjalMishra
     
    addButton.addEventListener('click', addTask);

    function addSubtask() {
      if (parentCube) {
        const size = 0.8; // Size of the subtask cube (smaller than the parent task) ,code by PranjalMishra

        const geometry = new THREE.BoxGeometry(size, size, size);
        const material = new THREE.MeshLambertMaterial({ color: 0x3498db }); // Use a different color for subtasks ,code by PranjalMishra
        const subtaskCube = new THREE.Mesh(geometry, material);

        // Position the new subtask cube relative to the parent cube ,code by PranjalMishra
        subtaskCube.position.copy(parentCube.position);
        subtaskCube.position.y -= 1.2; // Adjust the position to separate subtasks from the parent ,code by PranjalMishra

        scene.add(subtaskCube);
        cubes.push(subtaskCube);

        // Create a line connecting the subtask cube to its parent ,code by PranjalMishra
        const lineGeometry = new THREE.Geometry();
        lineGeometry.vertices.push(parentCube.position.clone(), subtaskCube.position.clone());
        const lineMaterial = new THREE.LineBasicMaterial({ color: 0x3498db });
        const line = new THREE.Line(lineGeometry, lineMaterial);
        scene.add(line);

        // Save the subtask cube and line as properties of the parent cube ,code by PranjalMishra
        if (!parentCube.subtasks) {
          parentCube.subtasks = [];
        }
        parentCube.subtasks.push(subtaskCube);
        parentCube.lines = parentCube.lines || [];
        parentCube.lines.push(line);
      }
    }

    // Add button event listeners for zooming ,code by PranjalMishra
    const zoomInButton = document.getElementById('zoom-in-button');
    const zoomOutButton = document.getElementById('zoom-out-button');
    zoomInButton.addEventListener('click', zoomIn);
    zoomOutButton.addEventListener('click', zoomOut);

    function zoomIn() {
      const zoomSpeed = 0.1; // Adjust the zoom speed as needed ,code by PranjalMishra

      // Decrease the camera's position z-coordinate to zoom in ,code by PranjalMishra
      camera.position.z -= zoomSpeed;

      // Limit the minimum zoom level ,code by PranjalMishra
      const minZoom = 2;
      camera.position.z = Math.max(minZoom, camera.position.z);
    }

    function zoomOut() {
      const zoomSpeed = 0.1; // Adjust the zoom speed as needed ,code by PranjalMishra

      // Increase the camera's position z-coordinate to zoom out ,code by PranjalMishra
      camera.position.z += zoomSpeed;

      // Limit the maximum zoom level ,code by PranjalMishra
      const maxZoom = 20;
      camera.position.z = Math.min(maxZoom, camera.position.z);
    }

    

    function onArrowKeyDown(event) {
    if (activeCube) {
      const rotationSpeed = 0.05;
      switch (event.key) {
        case 'ArrowUp':
          cubeRotation.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -rotationSpeed);
          activeCube.quaternion.multiply(cubeRotation);
          break;
        case 'ArrowDown':
          cubeRotation.setFromAxisAngle(new THREE.Vector3(1, 0, 0), rotationSpeed);
          activeCube.quaternion.multiply(cubeRotation);
          break;
        case 'ArrowLeft':
          cubeRotation.setFromAxisAngle(new THREE.Vector3(0, 1, 0), -rotationSpeed);
          activeCube.quaternion.multiply(cubeRotation);
          break;
        case 'ArrowRight':
          cubeRotation.setFromAxisAngle(new THREE.Vector3(0, 1, 0), rotationSpeed);
          activeCube.quaternion.multiply(cubeRotation);
          break;
        default:
          break;
      }
    }
  }

  // Function to update task text ,code by PranjalMishra
  function updateTaskText(cube) {
    const input = document.createElement("input");
    input.type = "text";
    input.value = cube.userData.text || "";
    cube.userData.text = null; // Clear the previous text stored in userData ,code by PranjalMishra

    input.addEventListener("keypress", (event) => {
      if (event.key === "Enter") {
        cube.userData.text = input.value;
        updateCubeText(cube, input.value);
        input.remove();
      }
    });

    input.addEventListener("blur", () => {
      cube.userData.text = input.value;
      updateCubeText(cube, input.value);
      input.remove();
    });

    cube.add(input);
    input.focus();
  }

  // Function to update subtask text , code by PranjalMishra
  function updateSubtaskText(cube) {
    const input = document.createElement("input");
    input.type = "text";
    input.value = cube.userData.text || "";
    cube.userData.text = null; // Clear the previous text stored in userData , code by PranjalMishra

    input.addEventListener("keypress", (event) => {
      if (event.key === "Enter") {
        cube.userData.text = input.value;
        updateCubeText(cube, input.value);
        input.remove();
      }
    });

    input.addEventListener("blur", () => {
      cube.userData.text = input.value;
      updateCubeText(cube, input.value);
      input.remove();
    });

    cube.add(input);
    input.focus();
  }

  // Function to update cube text ,code by PranjalMishra
  function updateCubeText(cube, text) {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    const textureSize = 512;

    canvas.width = textureSize;
    canvas.height = textureSize;
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.font = "36px Helvetica";
    ctx.fillStyle = "#000000";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    const textX = canvas.width / 2;
    const textY = canvas.height / 2;
    ctx.fillText(text, textX, textY);

    const texture = new THREE.CanvasTexture(canvas);
    texture.needsUpdate = true;
    cube.material.map = texture;
  }

  let selectedNode = null;
  let offsetX = 0;
  let offsetY = 0;
  let scale = 1;
  let baseScale = 1;
  let zoomStep = 0.1;

  let taskNodes = [];

  // ... (previously defined functions) ,code by PranjalMishra

  function toggleTaskDetails(taskNode) {
    const titleInput = taskNode.element.querySelector('.title-input');
    const saveButton = taskNode.element.querySelector('.save-button');

    if (titleInput.style.display === 'none') {
      // Show task details input fields ,code by PranjalMishra
      titleInput.style.display = 'block';
      saveButton.style.display = 'block';
    } else {
      // Hide task details input fields ,code by PranjalMishra
      titleInput.style.display = 'none';
      saveButton.style.display = 'none';
    }
  }

  function toggleSubTaskDetails(subTaskNode) {
    const titleInput = subTaskNode.element.querySelector('.title-input');
    const saveButton = subTaskNode.element.querySelector('.save-button');

    if (titleInput.style.display === 'none') {
      // Show subtask details input fields ,code by PranjalMishra
      titleInput.style.display = 'block';
      saveButton.style.display = 'block';
    } else {
      // Hide subtask details input fields ,code by PranjalMishra
      titleInput.style.display = 'none';
      saveButton.style.display = 'none';
    }
  }

  function updateTaskDetails(event, taskNode) {
    const value = event.target.value;
    taskNode.title = value;
  }

  function updateSubTaskDetails(event, subTaskNode) {
    const value = event.target.value;
    subTaskNode.title = value;
  }

  function updateTaskNode(taskNode) {
    const titleInput = taskNode.element.querySelector('.title-input');

    taskNode.title = titleInput.value;

    taskNode.element.textContent = taskNode.title; // Update node text content ,code by PranjalMishra

    toggleTaskDetails(taskNode);

    taskNode.element.classList.add('task-node'); // Add animation to the updated task node ,code by PranjalMishra
  }

  function updateSubTaskNode(subTaskNode) {
    const titleInput = subTaskNode.element.querySelector('.title-input');

    subTaskNode.title = titleInput.value;

    subTaskNode.element.textContent = subTaskNode.title; // Update node text content ,code by PranjalMishra

    toggleSubTaskDetails(subTaskNode);

    subTaskNode.element.classList.add('sub-task-node'); // Add animation to the updated sub-task node ,code by PranjalMishra
  }

  // ... (previously defined functions)

  // Add update button for each node (task and subtask) ,code by PranjalMishra
  function createTaskNode() {
    // ... (previously defined code)

    const updateButton = document.createElement('button');
    updateButton.innerHTML = 'Update Task';
    updateButton.addEventListener('click', () => toggleTaskDetails(taskNode));
    updateButton.classList.add('update-button');

    taskNode.updateButton = updateButton;

    node.appendChild(updateButton);

    // ... (previously defined code)
  }

  function createSubTaskNode(taskNode) {
    // ... (previously defined code)

    const updateButton = document.createElement('button');
    updateButton.innerHTML = 'Update Subtask';
    updateButton.addEventListener('click', () => toggleSubTaskDetails(subTaskNode));
    updateButton.classList.add('update-button');

    subTaskNode.updateButton = updateButton;

    node.appendChild(updateButton);

    // ... (previously defined code)
  }

  // ... (previously defined functions)

  // Add event listeners for the "Save" buttons to apply the updated title ,code by PranjalMishra
  function renderTaskNodes() {
    // ... (previously defined code)

    // Inside the loop for taskNode.subTasks ,code by PranjalMishra
    const subTaskSaveButton = document.createElement('button');
    subTaskSaveButton.innerHTML = 'Save';
    subTaskSaveButton.classList.add('save-button');
    subTaskSaveButton.addEventListener('click', () => updateSubTaskNode(subTaskNode));
    subTaskSaveButton.style.display = 'none';
    subTaskElement.appendChild(subTaskSaveButton);

    // ... (previously defined code)

    // Inside the loop for taskNodes ,code by PranjalMishra
    const saveButton = document.createElement('button');
    saveButton.innerHTML = 'Save';
    saveButton.classList.add('save-button');
    saveButton.addEventListener('click', () => updateTaskNode(taskNode));
    saveButton.style.display = 'none';
    node.appendChild(saveButton);

    // ... (previously defined code)
  }

    function animate() {
      requestAnimationFrame(animate);

      renderer.render(scene, camera);
    }

    // Start the animation loop ,code by PranjalMishra
    animate();

    

  </script>

  </script>
</body>
</html>
